import{u as v,b as j,j as e,p as y,a as N,r,H as b}from"./app-37f2a30b.js";import{u as w,I as E,P as I}from"./useInfiniteFetch-cda0624c.js";import{f as C}from"./utils-8b9f25e8.js";import"./index-7c8b67a5.js";const P=({extra:s})=>{var l,m,n;const i=v(),a=()=>{i(y(s))},{addItem:d,removeItem:h,inCart:t}=j(),c=t(s==null?void 0:s.id);return e.jsx("div",{className:`ticket-item-container col-lg-2 col-md-3 col-sm-3 col-6 my-hover-effect g-3 ${c?"active":""}`,onClick:()=>d(s),children:e.jsxs("div",{className:"extra-item-card",children:[c?e.jsx("button",{className:"delete-btn",onClick:()=>{h(s.id)},children:e.jsx("i",{className:"fa fa-times"})}):"",e.jsxs("div",{className:"custom-card",children:[e.jsx("span",{className:"extra-item-badge",children:C(s!=null&&s.sale_price?s==null?void 0:s.sale_price:s==null?void 0:s.price)}),e.jsxs("div",{className:"card-header position-relative",children:[e.jsx("img",{className:"extra-item-img",src:s!=null&&s.image?s==null?void 0:s.image:"/images/no-image.jpg",alt:s.display_name}),((l=s==null?void 0:s.event)==null?void 0:l.name)&&e.jsx("span",{className:"extra-item-unit",children:((m=s==null?void 0:s.event)==null?void 0:m.name.length)>15?`${s.event.name.substring(0,15)}...`:(n=s==null?void 0:s.event)==null?void 0:n.name})]}),e.jsxs("div",{className:"card-body extra-item-body",children:[e.jsx("p",{title:s.display_name,className:"extra-item-name",children:(s==null?void 0:s.display_name.length)>15?`${s.display_name.substring(0,15)}...`:s.display_name}),e.jsx("button",{onClick:a,className:"btn btn-primary btn-sm position-absolute rounded-circle extra-item-info-btn",children:e.jsx("i",{className:"fa fa-info"})})]})]})]})})};function L(){var p;const s=N(o=>o.searchQuery.query),{data:i,isError:a,isLoading:d,isSuccess:h,isFetching:t,hasNextPage:c,fetchNextPage:l,refetch:m}=w(["extras",s],"https://events.essenciacompany.com/api/extras",{query:s}),n=r.useCallback(()=>{const o=document.documentElement.scrollTop;o<500&&o===0&&c&&!t&&l()},[l,c,t]);return r.useEffect(()=>(window.addEventListener("scroll",n),()=>{window.removeEventListener("scroll",n)}),[n]),e.jsx("div",{className:"overflow-y-scroll overflow-x-none pt-3",children:d?e.jsx("div",{style:{width:"100%",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(b,{color:"#36d7b7"})}):e.jsx(E,{loadMore:l,hasMore:c,loader:e.jsx("div",{style:{textAlign:"center",paddingTop:"25px"},children:e.jsx(I,{color:"#36d7b7"})}),useWindow:!1,style:{overflowY:"scroll",maxHeight:"90vh",padding:"20px 10px"},onScroll:n,children:e.jsx("div",{className:"row g-3",children:a?e.jsx("div",{style:{textAlign:"center",color:"red"},children:"Something went wrong"}):(p=i==null?void 0:i.pages)!=null&&p.length?i.pages.map((o,g)=>e.jsx(r.Fragment,{children:o.data.map((u,f)=>e.jsx(P,{extra:u},f))},g)):e.jsx("div",{style:{textAlign:"center"},children:"No matching products found."})})})})}export{L as default};
