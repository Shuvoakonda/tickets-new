import{u as L,a as O,r as u,j as e,c as ye,b as _,_ as Ne,R as g,d as ge,e as R,o as Ee,f as Ce,g as ke,h as V,i as W,k as we,l as Se,m as Te}from"./app-051f1273.js";import{L as Me,N as Ie}from"./EssÃªncia-logo-26b00a9f.js";import{v as se,f as $e,a as Le,c as te,b as ae,d as _e}from"./utils-8b9f25e8.js";import{_ as oe,c as M,u as A,a as le,I as Ae,B as Y,F as De}from"./useFetch-3d3fd186.js";import"./index-c5c1a911.js";function Re(){var t,l,c,r;const n=L(),s=O(d=>d.itemInfoModal.item),a=O(d=>d.itemInfoModal.open),o=()=>{n(ye())};return u.useEffect(()=>{const d=document.getElementById("productDetails");a?(d.classList.add("show","fade-in"),d.style.display="block"):(d.classList.remove("fade-in"),d.classList.add("fade-out"),setTimeout(()=>{d.style.display="none",d.classList.remove("show","fade-out")},300))},[a]),e.jsxs(e.Fragment,{children:[s&&a&&e.jsx("div",{className:"modal-backdrop fade-in"}),e.jsx("div",{className:`modal ${a?"fade-in":"fade-out"}`,id:"productDetails",tabIndex:"-1","aria-labelledby":"productDetailsLabel","aria-hidden":!a,onClick:o,children:e.jsx("div",{className:"modal-dialog modal-center modal-lg",onClick:d=>d.stopPropagation(),children:e.jsxs("div",{className:"modal-content event-details",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-center",id:"productDetailsLabel",children:s==null?void 0:s.name}),e.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:o})]}),e.jsxs("div",{className:"modal-body row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("div",{className:"event_img text-center mb-3",children:e.jsx("img",{src:se(s==null?void 0:s.event_thumbnail),alt:s==null?void 0:s.name,className:"img-fluid"})}),e.jsx("h4",{className:"events-title text-secondary text-left mb-2",children:$e(s!=null&&s.sale_price?s==null?void 0:s.sale_price:s==null?void 0:s.price)})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("h5",{className:"events-title text-left mb-4",children:(t=s==null?void 0:s.event)==null?void 0:t.name}),e.jsxs("div",{className:"accordins",children:[e.jsxs("div",{className:"accordin-item d-flex align-items-start mb-3",children:[e.jsx("div",{className:"me-3",children:e.jsx("i",{className:"fa fa-calendar fa-2x"})}),e.jsxs("div",{children:[e.jsx("h5",{children:"Event time"}),e.jsx("h6",{children:Le(s==null?void 0:s.start_date,s.end_date)})]})]}),e.jsxs("div",{className:"accordin-item d-flex align-items-start mb-3",children:[e.jsx("div",{className:"me-3",children:e.jsx("i",{class:"fas fa-map-marker-alt fa-2x"})}),e.jsxs("div",{children:[e.jsx("h5",{children:"Event at"}),e.jsx("h6",{children:(l=s==null?void 0:s.event)==null?void 0:l.location})]})]}),e.jsxs("div",{className:"accordin-item d-flex align-items-start mb-3",children:[e.jsx("div",{className:"me-3",children:e.jsx("i",{className:"fa fa-info-circle fa-2x"})}),e.jsxs("div",{children:[e.jsx("h5",{children:"Description"}),e.jsx("h6",{dangerouslySetInnerHTML:{__html:(s==null?void 0:s.description)||""}})]})]}),e.jsxs("div",{className:"accordin-item d-flex align-items-start mb-3",children:[e.jsx("div",{className:"me-3",children:e.jsx("i",{class:"fas fa-cocktail fa-2x"})}),e.jsxs("div",{className:"w-100",children:[e.jsx("h5",{children:(c=s==null?void 0:s.extras)!=null&&c.length?"Extras":"No extras"}),(r=s==null?void 0:s.extras)!=null&&r.length?e.jsx("ul",{className:"list-group",children:s.extras.map((d,m)=>e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-start",children:[d.display_name,e.jsx("span",{className:"badge badge-primary bg-primary badge-pill",children:d.quantity})]},m))}):""]})]})]})]})]})]})})})]})}function Fe({onClick:n}){const{totalUniqueItems:s}=_();return e.jsx("div",{onClick:n,children:e.jsxs("button",{type:"button",className:"btn btn-dark btn-lg position-fixed",style:{bottom:"20px",right:"20px",zIndex:100},"data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasExample","aria-controls":"offcanvasExample",children:[e.jsx("i",{className:"fa fa-shopping-bag"}),e.jsxs("sup",{children:[" ",s||0]})]})})}function Z(n){return"default"+n.charAt(0).toUpperCase()+n.substr(1)}function Oe(n){var s=Pe(n,"string");return typeof s=="symbol"?s:String(s)}function Pe(n,s){if(typeof n!="object"||n===null)return n;var a=n[Symbol.toPrimitive];if(a!==void 0){var o=a.call(n,s||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(n)}function Be(n,s,a){var o=u.useRef(n!==void 0),t=u.useState(s),l=t[0],c=t[1],r=n!==void 0,d=o.current;return o.current=r,!r&&d&&l!==s&&c(s),[r?n:l,u.useCallback(function(m){for(var h=arguments.length,i=new Array(h>1?h-1:0),x=1;x<h;x++)i[x-1]=arguments[x];a&&a.apply(void 0,[m].concat(i)),c(m)},[a])]}function qe(n,s){return Object.keys(s).reduce(function(a,o){var t,l=a,c=l[Z(o)],r=l[o],d=oe(l,[Z(o),o].map(Oe)),m=s[o],h=Be(r,c,n[m]),i=h[0],x=h[1];return Ne({},d,(t={},t[o]=i,t[m]=x,t))},n)}function Ue(n){return n&&n.ownerDocument||document}function Qe(n){var s=Ue(n);return s&&s.defaultView||window}function ze(n,s){return Qe(n).getComputedStyle(n,s)}var He=/([A-Z])/g;function Ge(n){return n.replace(He,"-$1").toLowerCase()}var Xe=/^ms-/;function P(n){return Ge(n).replace(Xe,"-ms-")}var Ke=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Ve(n){return!!(n&&Ke.test(n))}function q(n,s){var a="",o="";if(typeof s=="string")return n.style.getPropertyValue(P(s))||ze(n).getPropertyValue(P(s));Object.keys(s).forEach(function(t){var l=s[t];!l&&l!==0?n.style.removeProperty(P(t)):Ve(t)?o+=t+"("+l+") ":a+=P(t)+": "+l+";"}),o&&(a+="transform: "+o+";"),n.style.cssText+=";"+a}const J={disabled:!1},ce=g.createContext(null);var We=function(s){return s.scrollTop},F="unmounted",C="exited",k="entering",T="entered",U="exiting",E=function(n){ge(s,n);function s(o,t){var l;l=n.call(this,o,t)||this;var c=t,r=c&&!c.isMounting?o.enter:o.appear,d;return l.appearStatus=null,o.in?r?(d=C,l.appearStatus=k):d=T:o.unmountOnExit||o.mountOnEnter?d=F:d=C,l.state={status:d},l.nextCallback=null,l}s.getDerivedStateFromProps=function(t,l){var c=t.in;return c&&l.status===F?{status:C}:null};var a=s.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(t){var l=null;if(t!==this.props){var c=this.state.status;this.props.in?c!==k&&c!==T&&(l=k):(c===k||c===T)&&(l=U)}this.updateStatus(!1,l)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var t=this.props.timeout,l,c,r;return l=c=r=t,t!=null&&typeof t!="number"&&(l=t.exit,c=t.enter,r=t.appear!==void 0?t.appear:c),{exit:l,enter:c,appear:r}},a.updateStatus=function(t,l){if(t===void 0&&(t=!1),l!==null)if(this.cancelNextCallback(),l===k){if(this.props.unmountOnExit||this.props.mountOnEnter){var c=this.props.nodeRef?this.props.nodeRef.current:R.findDOMNode(this);c&&We(c)}this.performEnter(t)}else this.performExit();else this.props.unmountOnExit&&this.state.status===C&&this.setState({status:F})},a.performEnter=function(t){var l=this,c=this.props.enter,r=this.context?this.context.isMounting:t,d=this.props.nodeRef?[r]:[R.findDOMNode(this),r],m=d[0],h=d[1],i=this.getTimeouts(),x=r?i.appear:i.enter;if(!t&&!c||J.disabled){this.safeSetState({status:T},function(){l.props.onEntered(m)});return}this.props.onEnter(m,h),this.safeSetState({status:k},function(){l.props.onEntering(m,h),l.onTransitionEnd(x,function(){l.safeSetState({status:T},function(){l.props.onEntered(m,h)})})})},a.performExit=function(){var t=this,l=this.props.exit,c=this.getTimeouts(),r=this.props.nodeRef?void 0:R.findDOMNode(this);if(!l||J.disabled){this.safeSetState({status:C},function(){t.props.onExited(r)});return}this.props.onExit(r),this.safeSetState({status:U},function(){t.props.onExiting(r),t.onTransitionEnd(c.exit,function(){t.safeSetState({status:C},function(){t.props.onExited(r)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(t,l){l=this.setNextCallback(l),this.setState(t,l)},a.setNextCallback=function(t){var l=this,c=!0;return this.nextCallback=function(r){c&&(c=!1,l.nextCallback=null,t(r))},this.nextCallback.cancel=function(){c=!1},this.nextCallback},a.onTransitionEnd=function(t,l){this.setNextCallback(l);var c=this.props.nodeRef?this.props.nodeRef.current:R.findDOMNode(this),r=t==null&&!this.props.addEndListener;if(!c||r){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[c,this.nextCallback],m=d[0],h=d[1];this.props.addEndListener(m,h)}t!=null&&setTimeout(this.nextCallback,t)},a.render=function(){var t=this.state.status;if(t===F)return null;var l=this.props,c=l.children;l.in,l.mountOnEnter,l.unmountOnExit,l.appear,l.enter,l.exit,l.timeout,l.addEndListener,l.onEnter,l.onEntering,l.onEntered,l.onExit,l.onExiting,l.onExited,l.nodeRef;var r=oe(l,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return g.createElement(ce.Provider,{value:null},typeof c=="function"?c(t,r):g.cloneElement(g.Children.only(c),r))},s}(g.Component);E.contextType=ce;E.propTypes={};function $(){}E.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:$,onEntering:$,onEntered:$,onExit:$,onExiting:$,onExited:$};E.UNMOUNTED=F;E.EXITED=C;E.ENTERING=k;E.ENTERED=T;E.EXITING=U;const Ye=E,Ze=!!(typeof window<"u"&&window.document&&window.document.createElement);var G=!1,X=!1;try{var H={get passive(){return G=!0},get once(){return X=G=!0}};Ze&&(window.addEventListener("test",H,H),window.removeEventListener("test",H,!0))}catch{}function Je(n,s,a,o){if(o&&typeof o!="boolean"&&!X){var t=o.once,l=o.capture,c=a;!X&&t&&(c=a.__once||function r(d){this.removeEventListener(s,r,l),a.call(this,d)},a.__once=c),n.addEventListener(s,c,G?o:l)}n.addEventListener(s,a,o)}function en(n,s,a,o){var t=o&&typeof o!="boolean"?o.capture:o;n.removeEventListener(s,a,t),a.__once&&n.removeEventListener(s,a.__once,t)}function ie(n,s,a,o){return Je(n,s,a,o),function(){en(n,s,a,o)}}function nn(n,s,a,o){if(a===void 0&&(a=!1),o===void 0&&(o=!0),n){var t=document.createEvent("HTMLEvents");t.initEvent(s,a,o),n.dispatchEvent(t)}}function sn(n){var s=q(n,"transitionDuration")||"",a=s.indexOf("ms")===-1?1e3:1;return parseFloat(s)*a}function tn(n,s,a){a===void 0&&(a=5);var o=!1,t=setTimeout(function(){o||nn(n,"transitionend",!0)},s+a),l=ie(n,"transitionend",function(){o=!0},{once:!0});return function(){clearTimeout(t),l()}}function an(n,s,a,o){a==null&&(a=sn(n)||0);var t=tn(n,a,o),l=ie(n,"transitionend",s);return function(){t(),l()}}function ee(n,s){const a=q(n,s)||"",o=a.indexOf("ms")===-1?1e3:1;return parseFloat(a)*o}function on(n,s){const a=ee(n,"transitionDuration"),o=ee(n,"transitionDelay"),t=an(n,l=>{l.target===n&&(t(),s(l))},a+o)}function D(...n){return n.filter(s=>s!=null).reduce((s,a)=>{if(typeof a!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return s===null?a:function(...t){s.apply(this,t),a.apply(this,t)}},null)}function ln(n){n.offsetHeight}const ne=n=>!n||typeof n=="function"?n:s=>{n.current=s};function cn(n,s){const a=ne(n),o=ne(s);return t=>{a&&a(t),o&&o(t)}}function rn(n,s){return u.useMemo(()=>cn(n,s),[n,s])}function dn(n){return n&&"setState"in n?R.findDOMNode(n):n??null}const un=g.forwardRef(({onEnter:n,onEntering:s,onEntered:a,onExit:o,onExiting:t,onExited:l,addEndListener:c,children:r,childRef:d,...m},h)=>{const i=u.useRef(null),x=rn(i,d),v=b=>{x(dn(b))},j=b=>S=>{b&&i.current&&b(i.current,S)},I=u.useCallback(j(n),[n]),p=u.useCallback(j(s),[s]),f=u.useCallback(j(a),[a]),y=u.useCallback(j(o),[o]),N=u.useCallback(j(t),[t]),w=u.useCallback(j(l),[l]),z=u.useCallback(j(c),[c]);return e.jsx(Ye,{ref:h,...m,onEnter:I,onEntered:f,onEntering:p,onExit:y,onExited:w,onExiting:N,addEndListener:z,nodeRef:i,children:typeof r=="function"?(b,S)=>r(b,{...S,ref:v}):g.cloneElement(r,{ref:v})})}),hn=un,fn={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function mn(n,s){const a=`offset${n[0].toUpperCase()}${n.slice(1)}`,o=s[a],t=fn[n];return o+parseInt(q(s,t[0]),10)+parseInt(q(s,t[1]),10)}const pn={[C]:"collapse",[U]:"collapsing",[k]:"collapsing",[T]:"collapse show"},xn=g.forwardRef(({onEnter:n,onEntering:s,onEntered:a,onExit:o,onExiting:t,className:l,children:c,dimension:r="height",in:d=!1,timeout:m=300,mountOnEnter:h=!1,unmountOnExit:i=!1,appear:x=!1,getDimensionValue:v=mn,...j},I)=>{const p=typeof r=="function"?r():r,f=u.useMemo(()=>D(b=>{b.style[p]="0"},n),[p,n]),y=u.useMemo(()=>D(b=>{const S=`scroll${p[0].toUpperCase()}${p.slice(1)}`;b.style[p]=`${b[S]}px`},s),[p,s]),N=u.useMemo(()=>D(b=>{b.style[p]=null},a),[p,a]),w=u.useMemo(()=>D(b=>{b.style[p]=`${v(p,b)}px`,ln(b)},o),[o,v,p]),z=u.useMemo(()=>D(b=>{b.style[p]=null},t),[p,t]);return e.jsx(hn,{ref:I,addEndListener:on,...j,"aria-expanded":j.role?d:null,onEnter:f,onEntering:y,onEntered:N,onExit:w,onExiting:z,childRef:c.ref,in:d,timeout:m,mountOnEnter:h,unmountOnExit:i,appear:x,children:(b,S)=>g.cloneElement(c,{...S,className:M(l,c.props.className,pn[b],p==="width"&&"collapse-horizontal")})})}),jn=xn;function re(n,s){return Array.isArray(n)?n.includes(s):n===s}const de=u.createContext({});de.displayName="AccordionContext";const Q=de,ue=u.forwardRef(({as:n="div",bsPrefix:s,className:a,children:o,eventKey:t,...l},c)=>{const{activeEventKey:r}=u.useContext(Q);return s=A(s,"accordion-collapse"),e.jsx(jn,{ref:c,in:re(r,t),...l,className:M(a,s),children:e.jsx(n,{children:u.Children.only(o)})})});ue.displayName="AccordionCollapse";const he=ue,fe=u.createContext({eventKey:""});fe.displayName="AccordionItemContext";const K=fe,me=u.forwardRef(({as:n="div",bsPrefix:s,className:a,onEnter:o,onEntering:t,onEntered:l,onExit:c,onExiting:r,onExited:d,...m},h)=>{s=A(s,"accordion-body");const{eventKey:i}=u.useContext(K);return e.jsx(he,{eventKey:i,onEnter:o,onEntering:t,onEntered:l,onExit:c,onExiting:r,onExited:d,children:e.jsx(n,{ref:h,...m,className:M(a,s)})})});me.displayName="AccordionBody";const vn=me;function bn(n,s){const{activeEventKey:a,onSelect:o,alwaysOpen:t}=u.useContext(Q);return l=>{let c=n===a?null:n;t&&(Array.isArray(a)?a.includes(n)?c=a.filter(r=>r!==n):c=[...a,n]:c=[n]),o==null||o(c,l),s==null||s(l)}}const pe=u.forwardRef(({as:n="button",bsPrefix:s,className:a,onClick:o,...t},l)=>{s=A(s,"accordion-button");const{eventKey:c}=u.useContext(K),r=bn(c,o),{activeEventKey:d}=u.useContext(Q);return n==="button"&&(t.type="button"),e.jsx(n,{ref:l,onClick:r,...t,"aria-expanded":Array.isArray(d)?d.includes(c):c===d,className:M(a,s,!re(d,c)&&"collapsed")})});pe.displayName="AccordionButton";const xe=pe,je=u.forwardRef(({as:n="h2",bsPrefix:s,className:a,children:o,onClick:t,...l},c)=>(s=A(s,"accordion-header"),e.jsx(n,{ref:c,...l,className:M(a,s),children:e.jsx(xe,{onClick:t,children:o})})));je.displayName="AccordionHeader";const yn=je,ve=u.forwardRef(({as:n="div",bsPrefix:s,className:a,eventKey:o,...t},l)=>{s=A(s,"accordion-item");const c=u.useMemo(()=>({eventKey:o}),[o]);return e.jsx(K.Provider,{value:c,children:e.jsx(n,{ref:l,...t,className:M(a,s)})})});ve.displayName="AccordionItem";const Nn=ve,be=u.forwardRef((n,s)=>{const{as:a="div",activeKey:o,bsPrefix:t,className:l,onSelect:c,flush:r,alwaysOpen:d,...m}=qe(n,{activeKey:"onSelect"}),h=A(t,"accordion"),i=u.useMemo(()=>({activeEventKey:o,onSelect:c,alwaysOpen:d}),[o,c,d]);return e.jsx(Q.Provider,{value:i,children:e.jsx(a,{ref:s,...m,className:M(l,h,r&&`${h}-flush`)})})});be.displayName="Accordion";const B=Object.assign(be,{Button:xe,Collapse:he,Item:Nn,Header:yn,Body:vn});function gn({item:n}){var h;const s=L(),{updateItem:a,updateItemQuantity:o,removeItem:t}=_(),l=i=>o(n==null?void 0:n.id,(n==null?void 0:n.quantity)+i),c=()=>t(n==null?void 0:n.id),r=(i,x)=>{if(!(!i||x<(i==null?void 0:i.quantity))){var v=n;x>0?v.extras=v==null?void 0:v.extras.map(j=>(j==null?void 0:j.id)===(i==null?void 0:i.id)?{...j,newQuantity:x}:j):v.extras=v==null?void 0:v.extras.filter(j=>(j==null?void 0:j.id)!==(i==null?void 0:i.id)),a(n==null?void 0:n.id,v)}},d=()=>{s(Ee(n))},m=u.useMemo(()=>n!=null&&n.isTicket?te(n==null?void 0:n.extras)??0:0,[n]);return e.jsxs("div",{className:"cart-item row w-100",children:[e.jsx("div",{className:"col-md-2 col-3",children:e.jsx("img",{src:se(n==null?void 0:n.event_thumbnail),className:"cart-item-image"})}),e.jsxs("div",{className:"col-md-10 col-9",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("h6",{className:"cart-item-name m-0",children:[e.jsx("small",{children:(n==null?void 0:n.name)||"Product Name"}),e.jsx("br",{})]}),e.jsx("button",{onClick:c,className:"btn btn-danger btn-sm",children:e.jsx("i",{className:"fa fa-trash"})})]}),e.jsxs("p",{className:"cart-item-info",children:[e.jsx("span",{children:(n==null?void 0:n.price)||0})," X ",e.jsx("span",{children:(n==null?void 0:n.quantity)||1})," = ",e.jsx("span",{children:((n==null?void 0:n.quantity)||1)*((n==null?void 0:n.price)||0)}),"$"]}),(n==null?void 0:n.isTicket)&&e.jsxs("p",{className:"cart-item-info",children:[e.jsx("span",{children:"Extras"})," = ",e.jsx("span",{children:m}),"$"]}),e.jsxs("div",{className:"cart-item-controls mt-2 d-flex justify-content-between",children:[e.jsxs("div",{className:"control-buttons-group",children:[e.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>l(-10),children:"-10"}),e.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>l(-5),children:"-5"}),e.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>l(-1),children:"-"})]}),e.jsx("p",{className:"item-quantity h6 d-flex justify-content-center align-items-center",children:(n==null?void 0:n.quantity)||1}),e.jsxs("div",{className:"control-buttons-group",children:[e.jsx("button",{className:"btn btn-outline-dark btn-sm",onClick:()=>l(1),children:"+"}),e.jsx("button",{className:"btn btn-outline-dark btn-sm",onClick:()=>l(5),children:"+5"}),e.jsx("button",{className:"btn btn-outline-dark btn-sm",onClick:()=>l(10),children:"+10"})]})]}),n!=null&&n.isTicket&&((h=n==null?void 0:n.extras)!=null&&h.length)?e.jsx(B,{className:"py-1 mt-2",children:e.jsxs(B.Item,{eventKey:"0",children:[e.jsx(B.Header,{children:"Extras"}),e.jsxs(B.Body,{children:[n.extras.map((i,x)=>e.jsxs("span",{className:"d-flex justify-content-between align-items-center",children:[i.display_name,e.jsxs("div",{className:"update-quantity d-flex align-items-center justify-content-center",children:[e.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>r(i,((i==null?void 0:i.newQuantity)??(i==null?void 0:i.quantity))-1),children:"-"}),e.jsx("input",{type:"number",value:(i==null?void 0:i.newQuantity)??(i==null?void 0:i.quantity)??0,onChange:v=>r(i,v.target.value),className:"form-control text-center mx-2 border-0",style:{width:"40px"}}),e.jsx("button",{className:"btn btn-outline-dark btn-sm",onClick:()=>r(i,((i==null?void 0:i.newQuantity)??(i==null?void 0:i.quantity))+1),children:"+"})]})]},x)),e.jsx("span",{className:"d-flex justify-content-center align-items-center mt-2",children:e.jsx("button",{type:"button",class:"btn btn-info text-light w-100 py-1",onClick:d,children:"Add extra"})})]})]})}):""]})]})}function En({open:n,onClose:s}){const{items:a,cartTotal:o,emptyCart:t}=_(),l=()=>{t(),s()},c=L(),r=()=>c(Ce()),d=u.useMemo(()=>ae(a),[a]),m=u.useMemo(()=>o+d,[o,d]);return n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"cart-modal-backdrop cart-fade-in",onClick:s}),e.jsxs("div",{className:`cart-modal ${n?"cart-fade-in":"cart-fade-out"}`,tabIndex:"-1",id:"offcanvasExample","aria-labelledby":"offcanvasExampleLabel","aria-hidden":!n,onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"offcanvas-header",children:[e.jsx("h5",{className:"offcanvas-title",id:"offcanvasExampleLabel",children:"Cart"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:s})]}),e.jsxs("div",{className:"offcanvas-body",children:[e.jsx("div",{className:"cart-items",children:a==null?void 0:a.map((h,i)=>e.jsx(gn,{item:h},i))}),e.jsxs("div",{className:"footer_body_modal card bg-light",children:[e.jsx("table",{className:"table table-hover table-bordered",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Sub Total:"}),e.jsxs("td",{children:[o,"$"]})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Extras:"}),e.jsxs("td",{children:[d,"$"]})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Total:"}),e.jsxs("td",{children:[m,"$"]})]})]})}),e.jsxs("div",{className:"d-flex gap-1 justify-content-end",children:[e.jsxs("button",{className:"btn btn-danger",onClick:l,children:[e.jsx("i",{class:"fas fa-redo me-2"}),"Reset"]}),e.jsxs("button",{className:"btn btn-success",onClick:r,children:[e.jsx("i",{class:"fas fa-money-bill-wave me-2"}),"Pay Now"]})]})]})]})]})]}):""}function Cn(){var d,m;const n=L(),{data:s}=le(["filter-events"],"/api/events"),[a,o]=u.useState(null),t=h=>{n(ke(h)),n(V("")),o(h),c("")},[l,c]=u.useState(null),r=h=>{n(V(h)),c(h)};return e.jsxs("div",{className:"form-control fixed row my-2 gx-2 shadow-sm left-0 right-0 padding-0 d-flex flex-row align-items-center",tabIndex:"-1",id:"offcanvasBottom","aria-labelledby":"offcanvasBottomLabel",onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"d-flex flex-row align-items-center col-md-6",children:[e.jsx("label",{for:"eventsSelect",children:"Events"}),e.jsx("div",{className:"filter-select-group w-100",children:e.jsx("div",{className:"form-floating row row-cols-1 row-cols-md-1",children:e.jsxs("select",{className:"form-select p-2",style:{fontSize:"0.8rem",height:"fit-content"},id:"eventsSelect","aria-label":"Events",children:[e.jsx("option",{onClick:()=>t(null),children:"None"}),(d=s==null?void 0:s.data)==null?void 0:d.map((h,i)=>e.jsx("option",{onClick:()=>t(h),children:(h==null?void 0:h.name)??"N/A"},i))]})})})]}),a!==null&&e.jsxs("div",{className:"d-flex flex-row align-items-center col-md-6",children:[e.jsx("label",{for:"eventsSelect",children:"Dates"}),e.jsx("div",{className:`filter-select-group w-100 ${a!==null?"filter-fade-in":"filter-fade-out"}`,children:e.jsx("div",{className:"form-floating row row-cols-1 row-cols-md-1",children:e.jsxs("select",{className:"form-select p-2",style:{fontSize:"0.8rem",height:"fit-content"},id:"eventsSelect","aria-label":"Events",children:[e.jsx("option",{onClick:()=>r(""),children:"All"}),(m=a==null?void 0:a.dates)==null?void 0:m.map((h,i)=>e.jsx("option",{onClick:()=>r(h),children:_e(h)??"N/A"},i))]})})})]})]})}function kn(){var p;const n=L(),s=O(f=>f.addExtraModal.item),a=O(f=>f.addExtraModal.open),{updateItem:o}=_(),[t,l]=u.useState(null),[c,r]=u.useState(1),d=f=>{r(y=>f>0?f:y)},m=()=>{n(W())},h=()=>{if(!(!s||!t)){var f=[...s.extras],y=!0;f=f.map(N=>N.id===t.id?(y=!1,{...N,newQuantity:N.quantity+c}):N),y&&(f=[...f,{...t,newQuantity:c}]),o(s==null?void 0:s.id,{...s,extras:[...f]}),l(null),r(1),n(W())}},{data:i,isError:x,isLoading:v,isSuccess:j,refetch:I}=le(["extras"],"https://events.essenciacompany.com/api/extras");return u.useEffect(()=>{const f=document.getElementById("addExtraModal");a?(f.classList.add("show","fade-in"),f.style.display="block"):(f.classList.remove("fade-in"),f.classList.add("fade-out"),setTimeout(()=>{f.style.display="none",f.classList.remove("show","fade-out")},300))},[a]),e.jsxs(e.Fragment,{children:[a&&e.jsx("div",{className:"add-extra-modal-backdrop fade-in"}),e.jsx("div",{className:`modal ${a?"fade-in":"fade-out"}`,id:"addExtraModal",tabIndex:"-1","aria-labelledby":"addExtraModalLabel","aria-hidden":!a,onClick:m,children:e.jsx("div",{className:"modal-dialog modal-center modal-lg",onClick:f=>f.stopPropagation(),children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title text-center",id:"addExtraModalLabel",children:["Add Extra to ",(s==null?void 0:s.name)??"Ticket"," ",t&&c>0&&`with an additional ${parseFloat((t==null?void 0:t.price)*c).toFixed(2)}`]}),e.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:m})]}),e.jsx("div",{className:"modal-body row",children:e.jsxs("div",{className:"col-md-12",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"extraSelect",children:"Select Extra"}),e.jsxs("select",{id:"extraSelect",className:"form-control mt-2",value:(t==null?void 0:t.display_name)??"Select an extra",children:[e.jsx("option",{onClick:()=>l(null),children:"None"}),(p=i==null?void 0:i.data)==null?void 0:p.map((f,y)=>e.jsx("option",{onClick:()=>l(f),children:f==null?void 0:f.display_name},y))]})]}),t?e.jsxs("div",{className:"form-group mt-3 d-flex flex-column justify-content-center align-items-center",children:[e.jsx("label",{htmlFor:"quantity",children:"Quantity"}),e.jsxs(Ae,{className:"mt-3 w-25",children:[e.jsx(Y,{variant:"outline-secondary",onClick:()=>d(c-1),children:"-"}),e.jsx(De.Control,{"aria-label":"Example text with two button addons",className:"text-center",value:c,onChange:f=>d(f.target.value)}),e.jsx(Y,{variant:"outline-danger",onClick:()=>d(c+1),children:"+"})]})]}):""]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:m,children:"Close"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:h,disabled:!t||c<1,children:"Add Extra"})]})]})})})]})}function wn({item:n}){var o;const s=u.useMemo(()=>te(n==null?void 0:n.extras)??0,n),a=u.useCallback(t=>t!=null&&t.newQuantity&&(t!=null&&t.quantity)?((t==null?void 0:t.newQuantity)-(t==null?void 0:t.quantity))*(t==null?void 0:t.price):t!=null&&t.newQuantity?(t==null?void 0:t.newQuantity)*(t==null?void 0:t.price):0,[n]);return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"table-info",children:[e.jsx("td",{children:n==null?void 0:n.name}),e.jsxs("td",{children:[n==null?void 0:n.price,"$"]}),e.jsx("td",{children:n==null?void 0:n.quantity}),(n==null?void 0:n.isTicket)&&e.jsxs(e.Fragment,{children:[e.jsxs("td",{children:[n==null?void 0:n.itemTotal,"$"]}),e.jsxs("td",{children:[s,"$"]})]}),e.jsxs("td",{className:"text-end",colSpan:n!=null&&n.isTicket?1:3,children:[n==null?void 0:n.itemTotal,"$"]})]}),(n==null?void 0:n.isTicket)&&((o=n==null?void 0:n.extras)==null?void 0:o.map((t,l)=>e.jsxs("tr",{children:[e.jsx("td",{children:t==null?void 0:t.name}),e.jsxs("td",{children:[t==null?void 0:t.price,"$"]}),e.jsxs("td",{children:[(t==null?void 0:t.quantity)??0," ",((t==null?void 0:t.newQuantity)??0)-((t==null?void 0:t.quantity)??0)>0?`+ ${(t==null?void 0:t.newQuantity)-((t==null?void 0:t.quantity)??0)}`:""]}),e.jsxs("td",{colSpan:3,className:"text-end",children:[a(t),"$"]})]},l)))]})}function Sn({discount:n=0}){const{items:s,cartTotal:a}=_(),o=u.useMemo(()=>ae(s),[s]),t=u.useMemo(()=>a+o-n,[a,o,n]);return e.jsxs("div",{className:"h-100 d-flex flex-column justify-content-start",children:[e.jsx("h5",{className:"modal-title text-start mb-2",id:"paymentModalLabel",children:"Cart Information"}),e.jsx("div",{className:"cart-info-items-container",children:e.jsx("div",{className:"card",children:e.jsxs("table",{className:"table mb-0 rounded",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Item"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Subtotal"}),e.jsx("th",{children:"Extras"}),e.jsx("th",{children:"Total"})]})}),e.jsx("tbody",{children:s==null?void 0:s.map((l,c)=>e.jsx(wn,{item:l},c))})]})})}),e.jsx("div",{className:"card mt-auto",children:e.jsx("table",{className:"table mb-0",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Subtotal"}),e.jsxs("td",{children:[a,"$"]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Extras"}),e.jsxs("td",{children:[o,"$"]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Discount"}),e.jsxs("td",{children:[n,"$"]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Total"}),e.jsxs("td",{children:[t,"$"]})]})]})})})]})}const Tn=({open:n})=>{const[s,a]=u.useState({name:"",email:"",vatNumber:"",address:"",discount:0}),o=p=>{const{name:f,value:y}=p.target;a(N=>({...N,[f]:y}))},[t,l]=u.useState(!0),[c,r]=u.useState(!1),[d,m]=u.useState(!1);u.useEffect(()=>{const p=document.getElementById("paymentModal");n?(p.classList.add("show","fade-in"),p.style.display="block"):(p.classList.remove("fade-in"),p.classList.add("fade-out"),setTimeout(()=>{p.style.display="none",p.classList.remove("show","fade-out")},300))},[n]);const h=L(),i=()=>h(we()),{items:x,cartTotal:v,emptyCart:j}=_(),I=async()=>{var y,N;m(!0);const p={biling:s,tickets:x.filter(w=>w.isTicket),extras:x.filter(w=>!w.isTicket),discount:s.discount,subTotal:v,total:v,sendToMail:t},f=await Se.post("https://events.essenciacompany.com/api/create-order",p,{headers:{"Content-Type":"application/json","X-Secret-Key":"pos_password"}});f.status==200&&(a({name:"",email:"",vatNumber:"",address:"",discount:0}),c&&((y=f==null?void 0:f.data)!=null&&y.security_key&&window.open(`https://events.essenciacompany.com/t/${(N=f==null?void 0:f.data)==null?void 0:N.security_key}`,"_blank"),r(!1)),l(!0),j(""),i()),m(!1)};return e.jsxs(e.Fragment,{children:[n&&e.jsx("div",{className:"payment-modal-backdrop payment-modal-fade-in"}),e.jsx("div",{className:`modal payment-modal ${n?"payment-modal-fade-in":"payment-modal-fade-out"}`,id:"paymentModal",tabIndex:"-1","aria-labelledby":"paymentModalLabel","aria-hidden":!n,onClick:i,children:e.jsx("div",{className:"modal-dialog modal-center modal-lg",onClick:p=>p.stopPropagation(),children:e.jsxs("div",{className:"modal-content p-0",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-center",id:"paymentModalLabel",children:"Place Order"}),e.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:i})]}),e.jsxs("div",{className:"modal-body row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h5",{className:"modal-title text-start mb-2",id:"paymentModalLabel",children:"Payment Information"}),e.jsxs("div",{className:"form-group mb-2",children:[e.jsx("label",{htmlFor:"nameInput",children:"Name"}),e.jsx("input",{id:"nameInput",name:"name",className:"form-control",value:s.name,onChange:o,placeholder:"Enter name"})]}),e.jsxs("div",{className:"form-group mb-2",children:[e.jsx("label",{htmlFor:"emailInput",children:"Email"}),e.jsx("input",{id:"emailInput",className:"form-control",name:"email",value:s.email,onChange:o,placeholder:"Enter email"})]}),e.jsxs("div",{className:"form-group mb-2",children:[e.jsx("label",{htmlFor:"vatInput",children:"VAT Number"}),e.jsx("input",{id:"vatInput",className:"form-control",name:"vatNumber",value:s.vatNumber,onChange:o,placeholder:"Enter VAT number"})]}),e.jsxs("div",{className:"form-group mb-2",children:[e.jsx("label",{htmlFor:"addressInput",children:"Address"}),e.jsx("textarea",{id:"addressInput",className:"form-control",name:"address",value:s.address,onChange:o,placeholder:"Enter address"})]}),e.jsxs("div",{className:"form-group mb-4",children:[e.jsx("label",{htmlFor:"discountInput",children:"Discount"}),e.jsx("input",{id:"discountInput",type:"number",className:"form-control",name:"discount",value:s.discount>0?s.discount:"",onChange:o,placeholder:"Enter discount (%)"})]}),e.jsxs("div",{class:"form-check",children:[e.jsx("input",{class:"form-check-input",type:"checkbox",value:t,checked:t,onChange:()=>l(p=>!p),id:"sendToMailCheck"}),e.jsx("label",{class:"form-check-label",for:"sendToMailCheck",children:"Send to mail"})]}),e.jsxs("div",{class:"form-check",children:[e.jsx("input",{class:"form-check-input",type:"checkbox",value:c,checked:c,onChange:()=>r(p=>!p),id:"printTicketCheck"}),e.jsx("label",{class:"form-check-label",for:"printTicketCheck",children:"Print Ticket"})]})]}),e.jsx("div",{className:"col-md-6",children:e.jsx(Sn,{discount:s.discount})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,children:"Close"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:I,disabled:!s.name||!s.email||!s.vatNumber||!s.address||d,children:d?"Processing...":"Proceed"})]})]})})})]})};function An({children:n}){const[s,a]=u.useState(!1),o=()=>{a(!s)},t=x=>{x.preventDefault(),console.log("Logout clicked")},[l,c]=u.useState(!1),r=()=>{c(!0)},d=()=>c(!1),m=O(x=>x.paymentModal.open),{pathname:h}=Te(),i=u.useMemo(()=>h.split("/")[2]==="tickets",[h]);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"dashboard_header",children:e.jsx("div",{className:"fluid_container",children:e.jsxs("div",{className:"header_row",children:[e.jsx("div",{className:"hamburger_menu",id:"hamburger_menu",onClick:o,children:s?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 329.26933 329",width:"512",height:"512",children:e.jsx("g",{children:e.jsx("path",{d:"m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0",fill:"#000000"})})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:"512",height:"512",children:e.jsx("g",{children:e.jsx("path",{clipRule:"evenodd",d:"m3 5c0-.26522.10536-.51957.29289-.70711.18754-.18753.44189-.29289.70711-.29289h12c.2652 0 .5196.10536.7071.29289.1875.18754.2929.44189.2929.70711s-.1054.51957-.2929.70711c-.1875.18753-.4419.29289-.7071.29289h-12c-.26522 0-.51957-.10536-.70711-.29289-.18753-.18754-.29289-.44189-.29289-.70711zm0 5c0-.26522.10536-.51957.29289-.70711.18754-.18753.44189-.29289.70711-.29289h6c.2652 0 .5196.10536.7071.29289.1875.18754.2929.44189.2929.70711 0 .2652-.1054.5196-.2929.7071s-.4419.2929-.7071.2929h-6c-.26522 0-.51957-.1054-.70711-.2929-.18753-.1875-.29289-.4419-.29289-.7071zm0 5c0-.2652.10536-.5196.29289-.7071.18754-.1875.44189-.2929.70711-.2929h12c.2652 0 .5196.1054.7071.2929s.2929.4419.2929.7071-.1054.5196-.2929.7071-.4419.2929-.7071.2929h-12c-.26522 0-.51957-.1054-.70711-.2929-.18753-.1875-.29289-.4419-.29289-.7071z",fill:"#000000",fillRule:"evenodd"})})})}),e.jsx("a",{href:"#",className:"logo",children:e.jsx("img",{style:{height:"70px",width:"100px",borderRadius:"10px"},src:Me,alt:"Logo"})})]})})}),e.jsx("div",{className:"dashboard_body",children:e.jsx("div",{className:"fluid_container",children:e.jsxs("div",{className:"dashboard_body_inner",children:[e.jsx("div",{className:`navigation ${s?"open":""}`,id:"navigation",children:e.jsx(Ie,{})}),e.jsx("div",{className:"dashboard_content",children:e.jsxs("div",{className:"dashboard_content_inner",style:{marginBottom:"50px"},children:[i&&e.jsx(Cn,{}),n,e.jsx(Fe,{onClick:r})]})})]})})}),e.jsx("form",{action:"/logout",method:"post",id:"logout-form",onSubmit:t,children:e.jsx("button",{type:"submit",children:"Logout"})}),e.jsx("div",{className:"menu_overlay",id:"menu_overlay"}),e.jsx(Re,{}),e.jsx(kn,{}),e.jsx(En,{open:l,onClose:d}),e.jsx(Tn,{open:m})]})}export{An as default};
